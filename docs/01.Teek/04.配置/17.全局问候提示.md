---
categories:
- Teek
coverImg: /home/bg3.webp
date: 2025-05-08 12:31:32
description: åŸºäºåœ¨ VitePress ä¸»é¢˜ä¸­å®ç°å…¨å±€é—®å€™æç¤º,åŸºäº Vue 3 ç»„åˆå¼ API å¼€å‘ï¼Œé€šè¿‡useRouteç›‘å¬è·¯ç”±å˜åŒ–ï¼Œç»“åˆå½“å‰æ—¶é—´ï¼ˆå°æ—¶åˆ†æ®µï¼‰ç”Ÿæˆä¸åŒé—®å€™è¯­ï¼ˆå¦‚æ—©å®‰ã€åˆå®‰ç­‰ï¼‰ï¼Œä½¿ç”¨vitepress-theme-teekçš„TkMessage.infoå¼¹å‡ºæç¤ºï¼Œè®¾ç½®
  4 ç§’æ˜¾ç¤ºæ—¶é•¿å¹¶é€šè¿‡watchå®ç°è·¯ç”±åˆ‡æ¢æ—¶å³æ—¶è§¦å‘é—®å€™é€»è¾‘ã€‚
permalink: /Teek/6ba496
title: å…¨å±€é—®å€™æç¤º
top: true
---
## æ–°å»ºç»„ä»¶

- åœ¨`docs\.vitepress\theme\components\`ç›®å½•ä¸‹åˆ›å»º`GlobalGreet.vue`æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ä»£ç 

```vue
// å…¨å±€é—®å€™æç¤º
<script setup lang="ts" name="GlobalGreet">
import { TkMessage } from "vitepress-theme-teek";
import { ref, watch, onMounted } from "vue";
import { useRoute } from "vitepress";

const route = useRoute();

const hasGreet = ref(false);
const duration = 4000;

const greet = () => {
  console.log(1);
  if (hasGreet.value) return;

  hasGreet.value = true;
  setTimeout(() => {
    hasGreet.value = false;
  }, duration);

  const now = new Date();
  let hours = now.getHours();
  let minutes = now.getMinutes();
  let seconds = now.getSeconds();

  const timeStr = `${String(hours).padStart(2, "0")}:${String(minutes).padStart(
    2,
    "0"
  )}:${String(seconds).padStart(2, "0")}`;
  const message = getGreetingMessage(hours, timeStr);

  TkMessage.primary({
    showClose: true,
    message,
    duration,
    plain: true,
    offset: 80,
  });
};

const getGreetingMessage = (hours: number, timeStr: string) => {
  if (hours >= 6 && hours < 9) {
    return `æ—©ä¸Šå¥½å‘€~ï¼Œç°åœ¨æ˜¯ ${timeStr}ï¼Œåƒæ—©é¤äº†å—ï¼ŸğŸ˜ŠğŸ¤­`;
  }
  if (hours >= 9 && hours < 12) {
    return `ä¸Šåˆå¥½å‘€~ï¼Œç°åœ¨æ˜¯ ${timeStr}ï¼Œè¯¥å‡†å¤‡åƒé¥­å•¦ğŸ¥—ğŸ–~`;
  }

  if (hours >= 12 && hours < 16) {
    return `ä¸‹åˆå¥½å‘€~ï¼Œç°åœ¨æ˜¯ ${timeStr}ï¼Œç¹å¿™çš„ä¸‹åˆä¹Ÿè¦é€‚å½“ä¼‘æ¯å“¦ğŸ¥¤ğŸ€~`;
  }

  if (hours >= 16 && hours < 19) {
    return `åˆ°é»„æ˜äº†~ï¼Œç°åœ¨æ˜¯ ${timeStr}ï¼Œè¯¥å‡†å¤‡åƒé¥­å•¦ğŸ¥—ğŸ–~`;
  }

  if (hours >= 19 && hours < 22) {
    return `æ™šä¸Šå¥½å‘€~ï¼Œç°åœ¨æ˜¯ ${timeStr}ï¼Œè¯¥å‡†å¤‡æ´—æ¼±ç¡è§‰å•¦ğŸ¥±ğŸ˜ª~`;
  }

  if (hours >= 22 || hours < 6) {
    return `åˆ«å†ç†¬å¤œäº†~ï¼Œç°åœ¨æ˜¯ ${timeStr}ï¼Œæ—©ç‚¹ç¡å§ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¬£èµæ—©ä¸Šçš„å¤ªé˜³~ğŸ˜‡ğŸ›`;
  }

  return `ä½ å¥½å‘€ï¼ç°åœ¨æ˜¯ ${timeStr}ã€‚`;
};

onMounted(() => {
  watch(route, greet, { immediate: true });
});
</script>

<template></template>
```

## æ³¨å†Œç»„ä»¶

åœ¨`docs\.vitepress\theme\components\TeekLayoutProvider.vue`ä¸­æ³¨å†Œ`GlobalGreet`ç»„ä»¶

```vue {3,10-11}
<script setup lang="ts" name="TeekLayoutProvider">
// @ts-ignore
import GlobalGreet from "./GlobalGreet.vue"; //å¯¼å…¥å…¨å±€é—®å€™ç»„ä»¶  // [!code focus]
</script>

<template>
  <Teek.Layout>
    <template #layout-top>
      // [!code focus:2]
      <!-- å…¨å±€é—®å€™ç»„ä»¶ -->
      <GlobalGreet />
    </template>
    å…¶ä»–ç»„ä»¶...
  </Teek.Layout>
</template>
```
